<div class="calendar-container" *ngIf="!this.loading">
    <!-- Cabecera del calendario -->
    <div class="calendar-header">
        <button (click)="prevMonth()">❮</button>
        <span>{{ months[currentMonth] }} {{ currentYear }}</span>
        <button (click)="nextMonth()">❯</button>
    </div>

    <!-- Días del mes -->
    <div class="calendar-days">
        <!-- Espacios vacíos al inicio para alinear correctamente -->
        <div *ngFor="let _ of emptyStartDays" class="calendar-day empty"></div>

        <!-- Días del mes -->
        <div *ngFor="let day of daysInCurrentMonth" [class.has-session]="day.hasSession" class="calendar-day"
            (click)="selectSession(day)">
            {{ day.number }}
        </div>

    </div>
</div>

<!-- MODAL -->
<!-- MODAL - ESTILO CARD -->
<div class="modal-overlay" *ngIf="selectedSession" (click)="closeSessionDetails()">
    <div class="modal-card" (click)="$event.stopPropagation()">
        
        <!-- Header del modal -->
        <div class="modal-header">
            <h4>{{ selectedSession.date }}</h4>
        </div>

        <!-- Contenido del modal -->
        <div class="modal-content">
            <ng-container *ngIf="selectedSession.book; else noSession">
                <p><i class="bi bi-book text-primary"></i> <strong>Libro:</strong> {{ selectedSession.book }}</p>
                <p><i class="bi bi-clock text-info"></i> <strong>Duración:</strong> {{ selectedSession.duration }}</p>
                <p><i class="bi bi-file-text text-success"></i> <strong>Páginas leídas:</strong> {{ selectedSession.pages }}</p>
                <p *ngIf="selectedSession.notes"><i class="bi bi-chat-left-dots text-warning"></i> <strong>Notas:</strong> {{ selectedSession.notes }}</p>
            </ng-container>

            <!-- Mensaje cuando no hay sesión -->
            <ng-template #noSession>
                <p class="text-muted mb-0 text-center">No hay ninguna sesión registrada este día.</p>
            </ng-template>
        </div>

        <!-- Botón de cierre -->
        <div class="modal-footer">
            <button class="close-btn" (click)="closeSessionDetails()">Cerrar</button>
        </div>
        
    </div>
</div>

